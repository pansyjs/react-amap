"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7894],{625:function(B,O,r){r.d(O,{S:function(){return f},X:function(){return g}});var u=r(50959),g=(0,u.createContext)({}),f=function(){return(0,u.useContext)(g)}},34422:function(B,O,r){r.d(O,{D:function(){return te}});var u=r(50959),g=r(35354),f=r(80667),s=r(66724),M=["layers","zoom","zooms","center","labelzIndex","lang","mapStyle","features","cursor","pitch","mask","defaultLayer"],d=["animateEnable","doubleClickZoom","dragEnable","isHotspot","jogEnable","keyboardEnable","pitchEnable","resizeEnable","rotateEnable","scrollWheel","touchZoom","zoomEnable"],h=["view","showIndoorMap","indoorMap","expandZoomRange","touchZoomCenter","showBuildingBlock","viewMode","buildingAnimation","skyColor"],a={width:"100%",height:"100%",position:"relative"},o={width:"100%",height:"100%"},c=M.concat(d,h),P={zoom:function(t,n){n&&n.setZoom(t)},cursor:function(t,n){n&&n.setDefaultCursor(t)},labelzIndex:function(t,n){n&&n.setLabelzIndex(t)}},p={center:s.t,mapStyle:function(t){return t.indexOf("amap://styles")===0?t:"amap://styles/".concat(t)}},v=r(95704),i=r(11527),m=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=(0,u.useRef)(),l=(0,u.useRef)(),E=(0,f.s)(t,l,{setterMap:P,converterMap:p}),A=E.loaded,w=E.prevProps,U=E.onInstanceCreated;(0,u.useEffect)(function(){W().then(function(){var _;(_=t.onMapCreate)===null||_===void 0||_.call(t,l.current),U==null||U(l.current)})},[]),(0,u.useEffect)(function(){A&&k(w,t)},[t]);var W=function(){var I=X(),j=(0,v.rr)();return l.current=new j.Map(n.current,I),Promise.resolve()},X=function(){var I={};return c.forEach(function(j){j in t&&(I[j]=F(j,t))}),I},F=function(I,j){return I in p?p[I](j[I]):j[I]},k=function(I,j){var G={},H=!1,q=!1;d.forEach(function(V){V in j&&(q=!0,J(V,I,j)&&(H=!0,G[V]=j[V]))}),H&&l.current.setStatus(G)},J=function(I,j,G){return j[I]!==G[I]};return(0,i.jsxs)("div",{style:a,children:[(0,i.jsx)("div",{ref:n,style:o,children:A?null:t.loading}),(0,i.jsx)("div",{children:A?t.children:null})]})},R=r(625);function y(e){"@babel/helpers - typeof";return y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y(e)}var x=["mapKey","version","plugins","AMapUI","Loca","loading","onComplete","onMapCreate"];function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter(function(E){return Object.getOwnPropertyDescriptor(e,E).enumerable})),n.push.apply(n,l)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?K(Object(n),!0).forEach(function(l){D(e,l,n[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach(function(l){Object.defineProperty(e,l,Object.getOwnPropertyDescriptor(n,l))})}return e}function D(e,t,n){return t=z(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function z(e){var t=T(e,"string");return y(t)==="symbol"?t:String(t)}function T(e,t){if(y(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var l=n.call(e,t||"default");if(y(l)!=="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Z(e,t){return Y(e)||$(e,t)||b(e,t)||L()}function L(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function b(e,t){if(e){if(typeof e=="string")return C(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return C(e,t)}}function C(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,l=new Array(t);n<t;n++)l[n]=e[n];return l}function $(e,t){var n=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var l,E,A,w,U=[],W=!0,X=!1;try{if(A=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;W=!1}else for(;!(W=(l=A.call(n)).done)&&(U.push(l.value),U.length!==t);W=!0);}catch(F){X=!0,E=F}finally{try{if(!W&&n.return!=null&&(w=n.return(),Object(w)!==w))return}finally{if(X)throw E}}return U}}function Y(e){if(Array.isArray(e))return e}function N(e,t){if(e==null)return{};var n=ee(e,t),l,E;if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(e);for(E=0;E<A.length;E++)l=A[E],!(t.indexOf(l)>=0)&&Object.prototype.propertyIsEnumerable.call(e,l)&&(n[l]=e[l])}return n}function ee(e,t){if(e==null)return{};var n={},l=Object.keys(e),E,A;for(A=0;A<l.length;A++)E=l[A],!(t.indexOf(E)>=0)&&(n[E]=e[E]);return n}var te=u.forwardRef(function(e,t){var n=e.mapKey,l=e.version,E=e.plugins,A=e.AMapUI,w=e.Loca,U=e.loading,W=e.onComplete,X=e.onMapCreate,F=N(e,x),k=(0,u.useState)(),J=Z(k,2),_=J[0],I=J[1],j=(0,u.useState)(),G=Z(j,2),H=G[0],q=G[1];return(0,u.useImperativeHandle)(t,function(){return H},[H]),(0,i.jsx)(R.X.Provider,{value:{AMap:_,map:H},children:(0,i.jsx)(g._,{mapKey:n,version:l,plugins:E,Loca:w,AMapUI:A,loading:U,onComplete:function(Q){W==null||W(Q),I(Q)},children:(0,i.jsx)(m,S(S({loading:U},F),{},{onMapCreate:function(Q){q(Q)}}))})})})},20394:function(B,O,r){r.d(O,{$:function(){return d}});var u=r(50959),g=r(625),f=r(80667),s={active:function(a,o){o&&(a?o.open():o.close())}},M={},d=u.forwardRef(function(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0,o=(0,g.S)(),c=o.map,P=o.AMap,p=(0,u.useRef)(null),v=(0,f.s)(h,p,{setterMap:s,converterMap:M}),i=v.onInstanceCreated;(0,u.useEffect)(function(){c&&m().then(function(){i==null||i(p.current)})},[c,h.poly]),(0,u.useImperativeHandle)(a,function(){return p.current},[p.current]);var m=function(){return new Promise(function(y){P.plugin(["AMap.PolygonEditor"],function(){p.current=new P.PolygonEditor(c,h.poly),y()})})};return null})},92265:function(B,O,r){r.d(O,{m:function(){return P}});var u=r(50959),g=r(625),f=r(80667),s=r(76746),M=r(66724);function d(p){var v=this;return p.length?p.map(function(i,m){return Array.isArray(i[m])?v.buildPathValue(i):(0,M.t)(i)}):p}var h=["center","radius","draggable","extData","visible","style"],a=h.concat(["zIndex","bubble"]),o={visible:function(v,i){i&&(v?i.show():i.hide())},style:function(v,i){i&&i.setOptions(v)}},c={path:function(v){return d(v)}},P=u.forwardRef(function(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},v=arguments.length>1?arguments[1]:void 0,i=(0,g.S)(),m=i.map,R=i.AMap,y=(0,u.useRef)(null),x=(0,f.s)(p,y,{setterMap:o,converterMap:c}),K=x.loaded,S=x.onInstanceCreated;(0,u.useEffect)(function(){m&&D().then(function(){S==null||S(y.current)})},[m]),(0,u.useImperativeHandle)(v,function(){return y.current},[K]);var D=function(){var T=(0,s.T)(p,a,c);return T.map=m,y.current=new R.Polygon(T),Promise.resolve()};return K?(0,s.p)(p.children,{key:"poly",instance:y.current,map:m}):null})},76746:function(B,O,r){r.d(O,{T:function(){return d},p:function(){return h}});var u=r(50959);function g(a){"@babel/helpers - typeof";return g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},g(a)}function f(a,o,c){return o=s(o),o in a?Object.defineProperty(a,o,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[o]=c,a}function s(a){var o=M(a,"string");return g(o)==="symbol"?o:String(o)}function M(a,o){if(g(a)!=="object"||a===null)return a;var c=a[Symbol.toPrimitive];if(c!==void 0){var P=c.call(a,o||"default");if(g(P)!=="object")return P;throw new TypeError("@@toPrimitive must return a primitive value.")}return(o==="string"?String:Number)(a)}function d(a,o,c){var P={},p=function(i,m){return i in c?c[i](m[i]):m[i]};return o.forEach(function(v){if(v in a)if(v==="style"&&a.style!==void 0){var i=Object.keys(a.style);i.forEach(function(m){P[m]=a.style[m]})}else v!=="visible"&&(P[v]=p(v,a))}),P}function h(a,o){var c;return!a||u.Children.count(a)!==1?null:u.cloneElement(u.Children.only(a),(c={},f(c,"".concat(o.key),o.instance),f(c,"map",o.map),c))}},66724:function(B,O,r){r.d(O,{t:function(){return g}});var u=r(95704),g=function(s){if(!s)return null;if("getLng"in s&&"getLat"in s)return s;var M=0,d=0;Array.isArray(s)?(M=s[0],d=s[1]):"lng"in s&&"lat"in s?(M=s.lng,d=s.lat):"longitude"in s&&"latitude"in s&&(M=s.longitude,d=s.latitude);var h=(0,u.rr)();return u.Ym&&h?new h.LngLat(M,d):null}},52917:function(B,O,r){r.r(O);var u=r(54306),g=r.n(u),f=r(50959),s=r(38342),M=r(34422),d=r(92265),h=r(20394),a=r(11527);O.default=function(){var o=(0,f.useState)(!0),c=g()(o,2),P=c[0],p=c[1],v=(0,f.useState)([[116.403322,39.920255],[116.410703,39.897555],[116.402292,39.892353],[116.389846,39.891365]]),i=g()(v,1),m=i[0],R=function(){p(function(x){return!x})};return(0,a.jsxs)("div",{style:{height:500},children:[(0,a.jsx)(M.D,{zoom:14,center:[116.400274,39.905812],children:(0,a.jsx)(d.m,{path:m,children:(0,a.jsx)(h.$,{active:P})})}),(0,a.jsx)(s.ZP,{onClick:function(){R()},children:"Random Active"})]})}},44445:function(B,O,r){r.r(O);var u=r(50959),g=r(34422),f=r(20394),s=r(92265),M=r(11527);O.default=function(){var d=(0,u.useRef)(),h=(0,u.useRef)(),a=(0,u.useRef)(),o=function(){d.current&&h.current&&a.current&&(d.current.addAdsorbPolygons([h.current,a.current]),d.current.setTarget(h.current),d.current.open())};return(0,M.jsx)("div",{style:{height:500},children:(0,M.jsxs)(g.D,{center:[116.475334,39.997534],zoom:16,children:[(0,M.jsx)(f.$,{events:{created:function(P){d.current=P,o()}}}),(0,M.jsx)(s.m,{path:[[116.474595,40.001321],[116.473526,39.999865],[116.476284,40.000917]],events:{created:function(P){h.current=P,o()},dblclick:function(){d.current.setTarget(h.current),d.current.open()}}}),(0,M.jsx)(s.m,{path:[[116.475334,39.997534],[116.476627,39.998315],[116.478603,39.99879],[116.478529,40.000296],[116.475082,40.000151],[116.473421,39.998717]],events:{created:function(P){a.current=P,o()},dblclick:function(){d.current.setTarget(a.current),d.current.open()}}})]})})}},83985:function(B,O,r){r.r(O),r.d(O,{default:function(){return i}});var u=r(54306),g=r.n(u),f=r(50959),s=r(77864),M=r(34422),d=r(20394),h=r(80667),a=r(625),o={},c={},P=f.forwardRef(function(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},R=arguments.length>1?arguments[1]:void 0,y=(0,f.useRef)(null),x=(0,a.S)(),K=x.map,S=x.AMap,D=(0,h.s)(m,y,{setterMap:o,converterMap:c}),z=D.loaded,T=D.onInstanceCreated;(0,f.useEffect)(function(){K&&Z().then(function(){T==null||T(y.current)})},[K]),(0,f.useImperativeHandle)(R,function(){return y.current},[z]);var Z=function(){return new Promise(function(C){y.current=new S.OverlayGroup([]),C()})},L=function(C){return C?f.Children.map(C,function($){return f.cloneElement($,{events:{created:function(N){y.current&&y.current.addOverlay(N)}}})}):null};return z?L(m.children):null}),p=r(92265),v=r(11527),i=function(){var m=(0,f.useRef)(),R=(0,f.useRef)([]),y=(0,f.useState)([[[116.474595,40.001321],[116.473526,39.999865],[116.476284,40.000917]],[[116.475334,39.997534],[116.476627,39.998315],[116.478603,39.99879],[116.478529,40.000296],[116.475082,40.000151],[116.473421,39.998717]]]),x=g()(y,1),K=x[0],S=(0,f.useRef)(),D=(0,f.useRef)(),z=function(b){S.current&&(S.current.addAdsorbPolygons(b),S.current.setTarget(b[0]),S.current.open(),R.current=b[0].getPath(),D.current.on("dblclick",T))},T=function(b){var C=b.target;R.current=C.getPath(),S.current.setTarget(C),S.current.open()},Z=function(b){D.current=b,setTimeout(function(){var C=D.current.getOverlays();C.length&&z(C)},0)};return(0,v.jsx)("div",{style:{height:500},children:(0,v.jsxs)(M.D,{center:[116.475334,39.997534],zoom:16,events:{created:function(b){m.current=b}},children:[(0,v.jsx)(d.$,{events:{created:function(b){S.current=b},removenode:function(b){var C=b.target,$=C.getPath();if($.length===0){var Y=D.current.getOverlays();if(Y.length===1){s.ZP.warning("\u533A\u57DF\u5FC5\u987B\u5269\u4F59\u4E00\u4E2A");var N=new AMap.Polygon({map:m.current,path:R.current});D.current.removeOverlay(C),D.current.addOverlay(N),D.current.on("dblclick",T)}D.current.removeOverlay(C);return}R.current=$}}}),(0,v.jsx)(P,{events:{created:Z},children:K.map(function(L,b){return(0,v.jsx)(p.m,{path:L},b)})})]})})}}}]);
