"use strict";(self.webpackChunk_pansy_workspace=self.webpackChunk_pansy_workspace||[]).push([[5699],{43080:function(R,x,o){o.d(x,{_:function(){return X}});var P=o(76091),U=o.n(P),C=o(7863),c=o.n(C),S=o(38425),y=o.n(S),s=o(79685),r;(function(n){n.notload="notload",n.loading="loading",n.loaded="loaded",n.failed="failed"})(r||(r={}));var E={key:"f97efc35164149d0c0f299e7a8adb3d2",AMap:{version:"2.0",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"2.0.0"}};function b(n){return"https://webapi.amap.com/maps?callback=__amap_init_callback"+"&v=".concat(n.AMap.version)+"&key=".concat(n.key)+"&plugin=".concat(n.AMap.plugins.join(","))}var d={AMap:r.notload,AMapUI:r.notload,Loca:r.notload},L={AMap:[],AMapUI:[],Loca:[]},u=U()({},E),D=[];function B(n){if(typeof n=="function"){if(d.AMap===r.loaded){n(window.AMap);return}D.push(n)}}function O(n){var a=[];return n.AMapUI&&a.push(Z(n.AMapUI)),n.Loca&&a.push(K(n.Loca)),Promise.all(a)}function Z(n){return new Promise(function(a,e){var t=[];if(n.plugins)for(var i=0;i<n.plugins.length;i+=1)u.AMapUI.plugins.indexOf(n.plugins[i])==-1&&t.push(n.plugins[i]);if(d.AMapUI===r.failed){e("\u524D\u6B21\u8BF7\u6C42 AMapUI \u5931\u8D25");return}if(d.AMapUI===r.notload){d.AMapUI=r.loading,u.AMapUI.version=n.version||u.AMapUI.version;var p=u.AMapUI.version,M=document.body||document.head,f=document.createElement("script");f.type="text/javascript",f.src="https://webapi.amap.com/ui/".concat(p,"/main.js"),f.onerror=function(l){d.AMapUI=r.failed,e("\u8BF7\u6C42 AMapUI \u5931\u8D25")},f.onload=function(){if(d.AMapUI=r.loaded,t.length)window.AMapUI.loadUI(t,function(){for(var l=0,g=t.length;l<g;l++){var w=t[l],h=w.split("/").slice(-1)[0];window.AMapUI[h]=arguments[l]}for(a();L.AMapUI.length;)L.AMapUI.splice(0,1)[0]()});else for(a();L.AMapUI.length;)L.AMapUI.splice(0,1)[0]()},M.appendChild(f);return}if(d.AMapUI===r.loaded){n.version&&n.version!==u.AMapUI.version?e("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C AMapUI \u6DF7\u7528"):t.length?window.AMapUI.loadUI(t,function(){for(var l=0,g=t.length;l<g;l++){var w=t[l],h=w.split("/").slice(-1)[0];window.AMapUI[h]=arguments[l]}a()}):a();return}n.version&&n.version!==u.AMapUI.version?e("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C AMapUI \u6DF7\u7528"):L.AMapUI.push(function(l){l?e(l):t.length?window.AMapUI.loadUI(t,function(){for(var g=0,w=t.length;g<w;g++){var h=t[g],A=h.split("/").slice(-1)[0];window.AMapUI[A]=arguments[g]}a()}):a()})})}function K(n){return new Promise(function(a,e){if(d.Loca===r.failed){e("\u524D\u6B21\u8BF7\u6C42 Loca \u5931\u8D25");return}if(d.Loca===r.notload){d.Loca=r.loading,u.Loca.version=n.version||u.Loca.version;var t=u.Loca.version,i=u.AMap.version.startsWith("2"),p=t.startsWith("2");if(i&&!p||!i&&p){e("JSAPI \u4E0E Loca \u7248\u672C\u4E0D\u5BF9\u5E94\uFF01\uFF01");return}var M=u.key,f=document.body||document.head,l=document.createElement("script");l.type="text/javascript",l.src="https://webapi.amap.com/loca?v=".concat(t,"&key=").concat(M),l.onerror=function(){d.Loca=r.failed,e("\u8BF7\u6C42 Loca \u5931\u8D25")},l.onload=function(){for(d.Loca=r.loaded,a();L.Loca.length;)L.Loca.splice(0,1)[0]()},f.appendChild(l);return}if(d.Loca===r.loaded){n.version&&n.version!==u.Loca.version?e("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C Loca \u6DF7\u7528"):a();return}n.version&&n.version!==u.Loca.version?e("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C Loca \u6DF7\u7528"):L.Loca.push(function(g){g?e(g):e()})})}function J(n){return new Promise(function(a,e){if(d.AMap==r.failed){e();return}if(d.AMap==r.notload){var t=n.key,i=t===void 0?u.key:t,p=n.version,M=p===void 0?u.AMap.version:p,f=n.plugins,l=f===void 0?[]:f;u.key=i,u.AMap.version=M,u.AMap.plugins=l,d.AMap=r.loading;var g=document.body||document.head;window.__amap_init_callback=function(v){if(delete window.__amap_init_callback,v){d.AMap=r.failed,e(v);return}for(d.AMap=r.loaded,O(n).then(function(){a(window.AMap)}).catch(e);D.length;)D.splice(0,1)[0]()};var w=document.createElement("script");w.type="text/javascript",w.src=b(u),w.onerror=function(v){d.AMap=r.failed,e(v)},g.appendChild(w);return}if(d.AMap==r.loaded){if(n.key&&n.key!==u.key){e("\u591A\u4E2A\u4E0D\u4E00\u81F4\u7684 key");return}if(n.version&&n.version!==u.AMap.version){e("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C JSAPI \u6DF7\u7528");return}var h=[];if(n.plugins)for(var A=0;A<n.plugins.length;A+=1)u.AMap.plugins.indexOf(n.plugins[A])==-1&&h.push(n.plugins[A]);h.length?window.AMap.plugin(h,function(){O(n).then(function(){a(window.AMap)}).catch(e)}):O(n).then(function(){a(window.AMap)}).catch(e);return}if(n.key&&n.key!==u.key){e("\u591A\u4E2A\u4E0D\u4E00\u81F4\u7684 key");return}if(n.version&&n.version!==u.AMap.version){e("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C JSAPI \u6DF7\u7528");return}var m=[];if(n.plugins)for(var A=0;A<n.plugins.length;A+=1)u.AMap.plugins.indexOf(n.plugins[A])==-1&&m.push(n.plugins[A]);B(function(){m.length?window.AMap.plugin(m,function(){O(n).then(function(){a(window.AMap)}).catch(e)}):O(n).then(function(){a(window.AMap)}).catch(e)})})}function W(){delete window.AMap,delete window.AMapUI,delete window.Loca,u=_objectSpread({},defaultConfig),d={AMap:LoadStatus.notload,AMapUI:LoadStatus.notload,Loca:LoadStatus.notload},L={AMap:[],AMapUI:[],Loca:[]}}var F=o(57077),z=o(63342),H=["loading","children","onComplete"],X=function(a){var e=a.loading,t=a.children,i=a.onComplete,p=y()(a,H),M=(0,s.useState)(!1),f=c()(M,2),l=f[0],g=f[1],w=(0,s.useState)(!0),h=c()(w,2),A=h[0],m=h[1];return(0,s.useEffect)(function(){J(U()(U()({},p),{},{key:p.mapKey})).then(function(){var v=(0,F.rr)();i==null||i(v),g(!0),m(!1)}).catch(function(v){m(!1)})},[JSON.stringify(p)]),A&&e?(0,z.jsx)(z.Fragment,{children:e}):(0,z.jsx)(z.Fragment,{children:l&&t})}},11930:function(R,x,o){o.d(x,{S:function(){return C},X:function(){return U}});var P=o(79685),U=P.createContext({}),C=function(){return P.useContext(U)}},15699:function(R,x,o){o.d(x,{D:function(){return X}});var P=o(76091),U=o.n(P),C=o(7863),c=o.n(C),S=o(38425),y=o.n(S),s=o(79685),r=o(43080),E=o(38781),b=o(44305),d=["layers","zoom","zooms","center","labelzIndex","lang","mapStyle","features","cursor","pitch","mask","defaultLayer"],L=["animateEnable","doubleClickZoom","dragEnable","isHotspot","jogEnable","keyboardEnable","pitchEnable","resizeEnable","rotateEnable","scrollWheel","touchZoom","zoomEnable"],u=["view","showIndoorMap","indoorMap","expandZoomRange","touchZoomCenter","showBuildingBlock","viewMode","buildingAnimation","skyColor"],D={width:"100%",height:"100%",position:"relative"},B={width:"100%",height:"100%"},O=d.concat(L,u),Z={zoom:function(a,e){e&&e.setZoom(a)},cursor:function(a,e){e&&e.setDefaultCursor(a)},labelzIndex:function(a,e){e&&e.setLabelzIndex(a)}},K={center:b.t,mapStyle:function(a){return a.indexOf("amap://styles")===0?a:"amap://styles/".concat(a)}},J=o(57077),W=o(63342),F=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=(0,s.useRef)(),t=(0,s.useRef)(),i=(0,E.s)(a,t,{setterMap:Z,converterMap:K}),p=i.loaded,M=i.prevProps,f=i.onInstanceCreated;(0,s.useEffect)(function(){l().then(function(){var m;(m=a.onMapCreate)===null||m===void 0||m.call(a,t.current),f==null||f(t.current)})},[]),(0,s.useEffect)(function(){p&&h(M,a)},[a]);var l=function(){var v=g(),I=(0,J.rr)();return t.current=new I.Map(e.current,v),Promise.resolve()},g=function(){var v={};return O.forEach(function(I){I in a&&(v[I]=w(I,a))}),v},w=function(v,I){return v in K?K[v](I[v]):I[v]},h=function(v,I){var T={},Y=!1,N=!1;L.forEach(function(j){j in I&&(N=!0,A(j,v,I)&&(Y=!0,T[j]=I[j]))}),Y&&t.current.setStatus(T)},A=function(v,I,T){return I[v]!==T[v]};return(0,W.jsxs)("div",{style:D,children:[(0,W.jsx)("div",{ref:e,style:B,children:p?null:a.loading}),(0,W.jsx)("div",{children:p?a.children:null})]})},z=o(11930),H=["mapKey","version","plugins","AMapUI","Loca","loading","onMapCreate"],X=s.forwardRef(function(n,a){var e=n.mapKey,t=n.version,i=n.plugins,p=n.AMapUI,M=n.Loca,f=n.loading,l=n.onMapCreate,g=y()(n,H),w=(0,s.useState)(),h=c()(w,2),A=h[0],m=h[1],v=(0,s.useState)(),I=c()(v,2),T=I[0],Y=I[1];return(0,s.useImperativeHandle)(a,function(){return T},[T]),(0,W.jsx)(z.X.Provider,{value:{AMap:A,map:T},children:(0,W.jsx)(r._,{mapKey:e,version:t,plugins:i,Loca:M,AMapUI:p,loading:f,onComplete:function(j){m(j)},children:(0,W.jsx)(F,U()(U()({loading:f},g),{},{onMapCreate:function(j){Y(j)}}))})})})},38781:function(R,x,o){o.d(x,{s:function(){return y}});var P=o(7863),U=o.n(P),C=o(79685),c=o(57077);function S(s,r){var E=(0,C.useRef)(),b=(0,C.useRef)(),d=typeof r=="function"?r(b.current,s):!0;return d&&(E.current=b.current,b.current=s),E.current}function y(s,r){var E,b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},d=b.setterMap,L=d===void 0?{}:d,u=b.converterMap,D=u===void 0?{}:u,B=(E=S(s))!==null&&E!==void 0?E:{},O=(0,C.useRef)([]),Z=(0,C.useState)(!1),K=U()(Z,2),J=K[0],W=K[1];(0,C.useEffect)(function(){r.current&&z(s,!0)},[s]),(0,C.useEffect)(function(){return function(){if(r.current)try{"destroy"in r.current&&r.current.destroy(),"hide"in r.current&&r.current.hide(),"map"in s&&"setMap"in r.current&&r.current.setMap(null)}catch(n){}}},[]);var F=function(a){if(W(!0),"events"in s&&a){var e,t;(e=(t=s.events).created)===null||e===void 0||e.call(t,a)}z(s,!1)},z=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,t=r.current;if(t)try{Object.keys(a).forEach(function(i){if(i==="events")return H(a);var p=!0;if(e&&(p=X(i,a,B)),!!p){var M=a[i];if(i in D&&(M=D[i](a[i])),i in L)L[i](M,t);else{var f="set".concat((0,c.Cq)(i));f in t&&t[f](M)}}})}catch(i){}},H=function(a){var e=r.current,t=Object.keys(a.events||{});t.length&&t.forEach(function(i){O.current.indexOf(i)===-1&&(O.current.push(i),e.on(i,function(p){return function(){if(a.events&&p in a.events){for(var M=arguments.length,f=new Array(M),l=0;l<M;l++)f[l]=arguments[l];a.events[p].apply(null,f)}}}(i)))})},X=function(a,e,t){return e[a]!==t[a]};return{loaded:J,prevProps:B,onInstanceCreated:F}}},57077:function(R,x,o){o.d(x,{Cq:function(){return U},Qv:function(){return c},Ym:function(){return P},rr:function(){return C}});var P=typeof window!="undefined",U=function(y){return y[0].toUpperCase()+y.slice(1,y.length)},C=function(){return window.AMap||window.proxy.AMap},c=function(){return window.AMapUI||window.proxy.AMapUI}},44305:function(R,x,o){o.d(x,{t:function(){return U}});var P=o(57077),U=function(c){if(!c)return null;if("getLng"in c&&"getLat"in c)return c;var S=0,y=0;Array.isArray(c)?(S=c[0],y=c[1]):"lng"in c&&"lat"in c?(S=c.lng,y=c.lat):"longitude"in c&&"latitude"in c&&(S=c.longitude,y=c.latitude);var s=(0,P.rr)();return P.Ym&&s?new s.LngLat(S,y):null}}}]);
