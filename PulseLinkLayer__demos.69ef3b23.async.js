"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7010],{1006:function(U,h,u){u.d(h,{j:function(){return p},l:function(){return f}});var l=u(50959),p=(0,l.createContext)({}),f=function(){return(0,l.useContext)(p)}},81077:function(U,h,u){u.d(h,{o:function(){return G}});var l=u(50959),p=u(625),f=u(11527),s=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=a.onCreate,c=(0,p.S)(),v=c.map,j=(0,l.useRef)();return(0,l.useEffect)(function(){v&&(j.current=new window.Loca.Container({map:v}),o==null||o(j.current))},[v]),(0,f.jsx)(f.Fragment,{children:a.children})},O=u(1006);function m(n){"@babel/helpers - typeof";return m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},m(n)}function y(n,a){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);a&&(c=c.filter(function(v){return Object.getOwnPropertyDescriptor(n,v).enumerable})),o.push.apply(o,c)}return o}function C(n){for(var a=1;a<arguments.length;a++){var o=arguments[a]!=null?arguments[a]:{};a%2?y(Object(o),!0).forEach(function(c){L(n,c,o[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):y(Object(o)).forEach(function(c){Object.defineProperty(n,c,Object.getOwnPropertyDescriptor(o,c))})}return n}function L(n,a,o){return a=W(a),a in n?Object.defineProperty(n,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[a]=o,n}function W(n){var a=P(n,"string");return m(a)==="symbol"?a:String(a)}function P(n,a){if(m(n)!=="object"||n===null)return n;var o=n[Symbol.toPrimitive];if(o!==void 0){var c=o.call(n,a||"default");if(m(c)!=="object")return c;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(n)}function K(n,a){return B(n)||M(n,a)||x(n,a)||A()}function A(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function x(n,a){if(n){if(typeof n=="string")return V(n,a);var o=Object.prototype.toString.call(n).slice(8,-1);if(o==="Object"&&n.constructor&&(o=n.constructor.name),o==="Map"||o==="Set")return Array.from(n);if(o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return V(n,a)}}function V(n,a){(a==null||a>n.length)&&(a=n.length);for(var o=0,c=new Array(a);o<a;o++)c[o]=n[o];return c}function M(n,a){var o=n==null?null:typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"];if(o!=null){var c,v,j,w,I=[],E=!0,D=!1;try{if(j=(o=o.call(n)).next,a===0){if(Object(o)!==o)return;E=!1}else for(;!(E=(c=j.call(o)).done)&&(I.push(c.value),I.length!==a);E=!0);}catch(J){D=!0,v=J}finally{try{if(!E&&o.return!=null&&(w=o.return(),Object(w)!==w))return}finally{if(D)throw v}}return I}}function B(n){if(Array.isArray(n))return n}var G=(0,l.forwardRef)(function(n,a){var o=(0,l.useState)(),c=K(o,2),v=c[0],j=c[1];return(0,l.useImperativeHandle)(a,function(){return v},[v]),(0,f.jsx)(O.j.Provider,{value:{loca:v},children:(0,f.jsx)(s,C(C({},n),{},{onCreate:function(I){j(I)}}))})})},57682:function(U,h,u){u.d(h,{A:function(){return C}});var l=u(50959),p=u(91227),f=u(80667),s=["loca","zIndex","visible","zooms","opacity"],O=s.concat([]),m={visible:function(W,P){P&&(W?P.show():P.hide())}},y={},C=(0,l.forwardRef)(function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},W=arguments.length>1?arguments[1]:void 0,P=(0,l.useRef)(),K=(0,f.s)(L,P,{setterMap:m,converterMap:y}),A=K.onInstanceCreated;return(0,l.useEffect)(function(){var x=(0,p.T)(L,O,y);P.current=new window.Loca.ScatterLayer(x),A==null||A(P.current)},[]),(0,l.useImperativeHandle)(W,function(){return P.current},[P.current]),null})},625:function(U,h,u){u.d(h,{S:function(){return f},X:function(){return p}});var l=u(50959),p=(0,l.createContext)({}),f=function(){return(0,l.useContext)(p)}},34422:function(U,h,u){u.d(h,{D:function(){return H}});var l=u(50959),p=u(35354),f=u(80667),s=u(66724),O=["layers","zoom","zooms","center","labelzIndex","lang","mapStyle","features","cursor","pitch","mask","defaultLayer"],m=["animateEnable","doubleClickZoom","dragEnable","isHotspot","jogEnable","keyboardEnable","pitchEnable","resizeEnable","rotateEnable","scrollWheel","touchZoom","zoomEnable"],y=["view","showIndoorMap","indoorMap","expandZoomRange","touchZoomCenter","showBuildingBlock","viewMode","buildingAnimation","skyColor"],C={width:"100%",height:"100%",position:"relative"},L={width:"100%",height:"100%"},W=O.concat(m,y),P={zoom:function(t,r){r&&r.setZoom(t)},cursor:function(t,r){r&&r.setDefaultCursor(t)},labelzIndex:function(t,r){r&&r.setLabelzIndex(t)}},K={center:s.t,mapStyle:function(t){return t.indexOf("amap://styles")===0?t:"amap://styles/".concat(t)}},A=u(95704),x=u(11527),V=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=(0,l.useRef)(),i=(0,l.useRef)(),d=(0,f.s)(t,i,{setterMap:P,converterMap:K}),g=d.loaded,Z=d.prevProps,R=d.onInstanceCreated;(0,l.useEffect)(function(){z().then(function(){var T;(T=t.onMapCreate)===null||T===void 0||T.call(t,i.current),R==null||R(i.current)})},[]),(0,l.useEffect)(function(){g&&ee(Z,t)},[t]);var z=function(){var b=X(),S=(0,A.rr)();return i.current=new S.Map(r.current,b),Promise.resolve()},X=function(){var b={};return W.forEach(function(S){S in t&&(b[S]=Y(S,t))}),b},Y=function(b,S){return b in K?K[b](S[b]):S[b]},ee=function(b,S){var N={},F=!1,te=!1;m.forEach(function($){$ in S&&(te=!0,k($,b,S)&&(F=!0,N[$]=S[$]))}),F&&i.current.setStatus(N)},k=function(b,S,N){return S[b]!==N[b]};return(0,x.jsxs)("div",{style:C,children:[(0,x.jsx)("div",{ref:r,style:L,children:g?null:t.loading}),(0,x.jsx)("div",{children:g?t.children:null})]})},M=u(625);function B(e){"@babel/helpers - typeof";return B=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},B(e)}var G=["mapKey","version","plugins","AMapUI","Loca","loading","onComplete","onMapCreate"];function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),r.push.apply(r,i)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?n(Object(r),!0).forEach(function(i){o(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function o(e,t,r){return t=c(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e){var t=v(e,"string");return B(t)==="symbol"?t:String(t)}function v(e,t){if(B(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(B(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function j(e,t){return J(e)||D(e,t)||I(e,t)||w()}function w(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function I(e,t){if(e){if(typeof e=="string")return E(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return E(e,t)}}function E(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function D(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var i,d,g,Z,R=[],z=!0,X=!1;try{if(g=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;z=!1}else for(;!(z=(i=g.call(r)).done)&&(R.push(i.value),R.length!==t);z=!0);}catch(Y){X=!0,d=Y}finally{try{if(!z&&r.return!=null&&(Z=r.return(),Object(Z)!==Z))return}finally{if(X)throw d}}return R}}function J(e){if(Array.isArray(e))return e}function _(e,t){if(e==null)return{};var r=Q(e,t),i,d;if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(d=0;d<g.length;d++)i=g[d],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(r[i]=e[i])}return r}function Q(e,t){if(e==null)return{};var r={},i=Object.keys(e),d,g;for(g=0;g<i.length;g++)d=i[g],!(t.indexOf(d)>=0)&&(r[d]=e[d]);return r}var H=l.forwardRef(function(e,t){var r=e.mapKey,i=e.version,d=e.plugins,g=e.AMapUI,Z=e.Loca,R=e.loading,z=e.onComplete,X=e.onMapCreate,Y=_(e,G),ee=(0,l.useState)(),k=j(ee,2),T=k[0],b=k[1],S=(0,l.useState)(),N=j(S,2),F=N[0],te=N[1];return(0,l.useImperativeHandle)(t,function(){return F},[F]),(0,x.jsx)(M.X.Provider,{value:{AMap:T,map:F},children:(0,x.jsx)(p._,{mapKey:r,version:i,plugins:d,Loca:Z,AMapUI:g,loading:R,onComplete:function(q){z==null||z(q),b(q)},children:(0,x.jsx)(V,a(a({loading:R},Y),{},{onMapCreate:function(q){te(q)}}))})})})},91227:function(U,h,u){u.d(h,{T:function(){return l}});function l(p,f,s){var O={},m=function(C,L){return C in s?s[C](L[C]):L[C]};return f.forEach(function(y){y in p&&y!=="visible"&&(O[y]=m(y,p))}),O}},66724:function(U,h,u){u.d(h,{t:function(){return p}});var l=u(95704),p=function(s){if(!s)return null;if("getLng"in s&&"getLat"in s)return s;var O=0,m=0;Array.isArray(s)?(O=s[0],m=s[1]):"lng"in s&&"lat"in s?(O=s.lng,m=s.lat):"longitude"in s&&"latitude"in s&&(O=s.longitude,m=s.latitude);var y=(0,l.rr)();return l.Ym&&y?new y.LngLat(O,m):null}},15455:function(U,h,u){u.r(h),u.d(h,{default:function(){return G}});var l=u(54306),p=u.n(l),f=u(50959),s=u(34422),O=u(38342),m=u(1006),y=u(57682),C=u(91227),L=u(80667),W=["loca","zIndex","zooms","opacity"],P=W.concat(["visible"]),K={visible:function(a,o){o&&(a?o.show():o.hide())}},A={},x=(0,f.forwardRef)(function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0,o=(0,m.l)(),c=o.loca,v=(0,f.useRef)(),j=(0,L.s)(n,v,{setterMap:K,converterMap:A}),w=j.onInstanceCreated;return(0,f.useEffect)(function(){if(c){var I=(0,C.T)(n,P,A);v.current=new window.Loca.PulseLinkLayer(I),w==null||w(v.current)}},[c]),(0,f.useImperativeHandle)(a,function(){return v.current},[v.current]),null}),V=u(81077),M=u(11527),B=function(){var a=(0,m.l)(),o=a.loca,c=(0,f.useState)(!0),v=p()(c,2),j=v[0],w=v[1],I=(0,f.useState)(),E=p()(I,2),D=E[0],J=E[1],_=(0,f.useState)(),Q=p()(_,2),H=Q[0],e=Q[1];return(0,f.useEffect)(function(){if(D&&o&&H){var t=new window.Loca.GeoJSONSource({url:"https://a.amap.com/Loca/static/loca-v2/demos/mock_data/pulselink-china-city-point.json"});D.setSource(t),D.setStyle({unit:"meter",size:[2e5,2e5],borderWidth:0,texture:"https://a.amap.com/Loca/static/static/green.png",duration:2e3,animate:!0}),o.add(D);var r=new window.Loca.GeoJSONSource({url:"https://a.amap.com/Loca/static/loca-v2/demos/mock_data/data-line-out.json"});H.setSource(r),H.setStyle({unit:"meter",dash:[4e4,0,4e4,0],lineWidth:function(){return[8e3,8e3]},height:function(d,g){return g.distance/3+10},smoothSteps:30,speed:function(){return 1e3+Math.random()*1e5},flowLength:1e5,lineColors:function(){return["rgba(44, 119, 248, 0.9)","rgba(44, 119, 248, 0.5)","rgba(44, 119, 248, 0.2)"]},maxHeightScale:.3,headColor:"rgb(3, 214, 252)",trailColor:"rgba(255, 255,0,0)"}),o.add(H),o.animate.start()}},[D,H,o]),(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(O.ZP,{onClick:function(){w(function(r){return!r})},children:"\u5207\u6362\u663E\u9690"}),(0,M.jsx)(y.A,{zIndex:10,opacity:.6,visible:j,zooms:[2,22],events:{created:function(r){J(r)}}}),(0,M.jsx)(x,{zIndex:10,opacity:1,visible:j,zooms:[2,22],depth:!0,events:{created:function(r){e(r)}}})]})},G=function(){return(0,M.jsx)("div",{style:{height:500},children:(0,M.jsx)(s.D,{Loca:{},viewMode:"3D",pitch:35,center:[104.780269,34.955403],zoom:5,mapStyle:"amap://styles/grey",children:(0,M.jsx)(V.o,{children:(0,M.jsx)(B,{})})})})}}}]);
