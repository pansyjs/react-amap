"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7894],{625:function(B,M,n){n.d(M,{S:function(){return f},X:function(){return y}});var i=n(50959),y=(0,i.createContext)({}),f=function(){return(0,i.useContext)(y)}},34422:function(B,M,n){n.d(M,{D:function(){return ie}});var i=n(50959),y=n(35354),f=n(80667),s=n(66724),h=["layers","zoom","zooms","center","labelzIndex","lang","mapStyle","features","cursor","pitch","mask","defaultLayer"],p=["animateEnable","doubleClickZoom","dragEnable","isHotspot","jogEnable","keyboardEnable","pitchEnable","resizeEnable","rotateEnable","scrollWheel","touchZoom","zoomEnable"],g=["view","showIndoorMap","indoorMap","expandZoomRange","touchZoomCenter","showBuildingBlock","viewMode","buildingAnimation","skyColor","WebGLParams"],o={width:"100%",height:"100%",position:"relative"},u={width:"100%",height:"100%"},l=h.concat(p,g),P={zoom:function(t,r){r&&r.setZoom(t)},cursor:function(t,r){r&&r.setDefaultCursor(t)},labelzIndex:function(t,r){r&&r.setLabelzIndex(t)}},m={center:s.t,mapStyle:function(t){return t.indexOf("amap://styles")===0?t:"amap://styles/".concat(t)}},v=n(95704),c=n(11527);function d(e){"@babel/helpers - typeof";return d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d(e)}function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(O){return Object.getOwnPropertyDescriptor(e,O).enumerable})),r.push.apply(r,a)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?x(Object(r),!0).forEach(function(a){L(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function L(e,t,r){return t=U(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function U(e){var t=I(e,"string");return d(t)==="symbol"?t:String(t)}function I(e,t){if(d(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(d(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var D=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=(0,i.useRef)(),a=(0,i.useRef)(),O=(0,f.s)(t,a,{setterMap:P,converterMap:m}),C=O.loaded,z=O.prevProps,_=O.onInstanceCreated;(0,i.useEffect)(function(){K().then(function(){var W;(W=t.onMapCreate)===null||W===void 0||W.call(t,a.current),_==null||_(a.current)})},[]),(0,i.useEffect)(function(){C&&k(z,t)},[t]);var K=function(){var A=X(),j=(0,v.rr)();return a.current=new j.Map(r.current,A),Promise.resolve()},X=function(){var A={};return l.forEach(function(j){j in t&&(A[j]=F(j,t))}),A},F=function(A,j){return A in m?m[A](j[A]):j[A]},k=function(A,j){var G={},H=!1,q=!1;p.forEach(function(N){N in j&&(q=!0,J(N,A,j)&&(H=!0,G[N]=j[N]))}),H&&a.current.setStatus(G)},J=function(A,j,G){return j[A]!==G[A]};return(0,c.jsxs)("div",{className:t.className,style:b(b({},o),t.style),children:[(0,c.jsx)("div",{ref:r,style:u,children:C?null:t.loading}),(0,c.jsx)("div",{children:C?t.children:null})]})},w=n(625);function R(e){"@babel/helpers - typeof";return R=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},R(e)}var V=["mapKey","version","plugins","AMapUI","Loca","loading","onComplete","onMapCreate"];function T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(O){return Object.getOwnPropertyDescriptor(e,O).enumerable})),r.push.apply(r,a)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?T(Object(r),!0).forEach(function(a){S(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function S(e,t,r){return t=Z(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Z(e){var t=Y(e,"string");return R(t)==="symbol"?t:String(t)}function Y(e,t){if(R(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(R(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $(e,t){return ae(e)||ne(e,t)||re(e,t)||te()}function te(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function re(e,t){if(e){if(typeof e=="string")return ee(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ee(e,t)}}function ee(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function ne(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,O,C,z,_=[],K=!0,X=!1;try{if(C=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;K=!1}else for(;!(K=(a=C.call(r)).done)&&(_.push(a.value),_.length!==t);K=!0);}catch(F){X=!0,O=F}finally{try{if(!K&&r.return!=null&&(z=r.return(),Object(z)!==z))return}finally{if(X)throw O}}return _}}function ae(e){if(Array.isArray(e))return e}function oe(e,t){if(e==null)return{};var r=ue(e,t),a,O;if(Object.getOwnPropertySymbols){var C=Object.getOwnPropertySymbols(e);for(O=0;O<C.length;O++)a=C[O],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function ue(e,t){if(e==null)return{};var r={},a=Object.keys(e),O,C;for(C=0;C<a.length;C++)O=a[C],!(t.indexOf(O)>=0)&&(r[O]=e[O]);return r}var ie=i.forwardRef(function(e,t){var r=e.mapKey,a=e.version,O=e.plugins,C=e.AMapUI,z=e.Loca,_=e.loading,K=e.onComplete,X=e.onMapCreate,F=oe(e,V),k=(0,i.useState)(),J=$(k,2),W=J[0],A=J[1],j=(0,i.useState)(),G=$(j,2),H=G[0],q=G[1];return(0,i.useImperativeHandle)(t,function(){return H},[H]),(0,c.jsx)(w.X.Provider,{value:{AMap:W,map:H},children:(0,c.jsx)(y._,{mapKey:r,version:a,plugins:O,Loca:z,AMapUI:C,loading:_,onComplete:function(Q){K==null||K(Q),A(Q)},children:(0,c.jsx)(D,E(E({loading:_},F),{},{onMapCreate:function(Q){q(Q)}}))})})})},20394:function(B,M,n){n.d(M,{$:function(){return p}});var i=n(50959),y=n(625),f=n(80667),s={active:function(o,u){u&&(o?u.open():u.close())}},h={},p=i.forwardRef(function(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0,u=(0,y.S)(),l=u.map,P=u.AMap,m=(0,i.useRef)(null),v=(0,f.s)(g,m,{setterMap:s,converterMap:h}),c=v.onInstanceCreated;(0,i.useEffect)(function(){l&&d().then(function(){c==null||c(m.current)})},[l,g.poly]),(0,i.useImperativeHandle)(o,function(){return m.current},[m.current]);var d=function(){return new Promise(function(b){P.plugin(["AMap.PolygonEditor"],function(){m.current=new P.PolygonEditor(l,g.poly),b()})})};return null})},92265:function(B,M,n){n.d(M,{m:function(){return P}});var i=n(50959),y=n(625),f=n(80667),s=n(76746),h=n(66724);function p(m){var v=this;return m.length?m.map(function(c,d){return Array.isArray(c[d])?v.buildPathValue(c):(0,h.t)(c)}):m}var g=["center","radius","draggable","extData","visible","style"],o=g.concat(["zIndex","bubble"]),u={visible:function(v,c){c&&(v?c.show():c.hide())},style:function(v,c){c&&c.setOptions(v)}},l={path:function(v){return p(v)}},P=i.forwardRef(function(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},v=arguments.length>1?arguments[1]:void 0,c=(0,y.S)(),d=c.map,x=c.AMap,b=(0,i.useRef)(null),L=(0,f.s)(m,b,{setterMap:u,converterMap:l}),U=L.loaded,I=L.onInstanceCreated;(0,i.useEffect)(function(){d&&D().then(function(){I==null||I(b.current)})},[d]),(0,i.useImperativeHandle)(v,function(){return b.current},[U]);var D=function(){var R=(0,s.T)(m,o,l);return R.map=d,b.current=new x.Polygon(R),Promise.resolve()};return U?(0,s.p)(m.children,{key:"poly",instance:b.current,map:d}):null})},76746:function(B,M,n){n.d(M,{T:function(){return p},p:function(){return g}});var i=n(50959);function y(o){"@babel/helpers - typeof";return y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},y(o)}function f(o,u,l){return u=s(u),u in o?Object.defineProperty(o,u,{value:l,enumerable:!0,configurable:!0,writable:!0}):o[u]=l,o}function s(o){var u=h(o,"string");return y(u)==="symbol"?u:String(u)}function h(o,u){if(y(o)!=="object"||o===null)return o;var l=o[Symbol.toPrimitive];if(l!==void 0){var P=l.call(o,u||"default");if(y(P)!=="object")return P;throw new TypeError("@@toPrimitive must return a primitive value.")}return(u==="string"?String:Number)(o)}function p(o,u,l){var P={},m=function(c,d){return c in l?l[c](d[c]):d[c]};return u.forEach(function(v){if(v in o)if(v==="style"&&o.style!==void 0){var c=Object.keys(o.style);c.forEach(function(d){P[d]=o.style[d]})}else v!=="visible"&&(P[v]=m(v,o))}),P}function g(o,u){var l;return!o||i.Children.count(o)!==1?null:i.cloneElement(i.Children.only(o),(l={},f(l,"".concat(u.key),u.instance),f(l,"map",u.map),l))}},66724:function(B,M,n){n.d(M,{t:function(){return y}});var i=n(95704),y=function(s){if(!s)return null;if("getLng"in s&&"getLat"in s)return s;var h=0,p=0;Array.isArray(s)?(h=s[0],p=s[1]):"lng"in s&&"lat"in s?(h=s.lng,p=s.lat):"longitude"in s&&"latitude"in s&&(h=s.longitude,p=s.latitude);var g=(0,i.rr)();return i.Ym&&g?new g.LngLat(h,p):null}},52917:function(B,M,n){n.r(M);var i=n(54306),y=n.n(i),f=n(50959),s=n(25552),h=n(34422),p=n(92265),g=n(20394),o=n(11527);M.default=function(){var u=(0,f.useState)(!0),l=y()(u,2),P=l[0],m=l[1],v=(0,f.useState)([[116.403322,39.920255],[116.410703,39.897555],[116.402292,39.892353],[116.389846,39.891365]]),c=y()(v,1),d=c[0],x=function(){m(function(L){return!L})};return(0,o.jsxs)("div",{style:{height:500},children:[(0,o.jsx)(h.D,{zoom:14,center:[116.400274,39.905812],children:(0,o.jsx)(p.m,{path:d,children:(0,o.jsx)(g.$,{active:P})})}),(0,o.jsx)(s.ZP,{onClick:function(){x()},children:"Random Active"})]})}},44445:function(B,M,n){n.r(M);var i=n(50959),y=n(34422),f=n(20394),s=n(92265),h=n(11527);M.default=function(){var p=(0,i.useRef)(),g=(0,i.useRef)(),o=(0,i.useRef)(),u=function(){p.current&&g.current&&o.current&&(p.current.addAdsorbPolygons([g.current,o.current]),p.current.setTarget(g.current),p.current.open())};return(0,h.jsx)("div",{style:{height:500},children:(0,h.jsxs)(y.D,{center:[116.475334,39.997534],zoom:16,children:[(0,h.jsx)(f.$,{events:{created:function(P){p.current=P,u()}}}),(0,h.jsx)(s.m,{path:[[116.474595,40.001321],[116.473526,39.999865],[116.476284,40.000917]],events:{created:function(P){g.current=P,u()},dblclick:function(){p.current.setTarget(g.current),p.current.open()}}}),(0,h.jsx)(s.m,{path:[[116.475334,39.997534],[116.476627,39.998315],[116.478603,39.99879],[116.478529,40.000296],[116.475082,40.000151],[116.473421,39.998717]],events:{created:function(P){o.current=P,u()},dblclick:function(){p.current.setTarget(o.current),p.current.open()}}})]})})}},83985:function(B,M,n){n.r(M),n.d(M,{default:function(){return c}});var i=n(54306),y=n.n(i),f=n(50959),s=n(34432),h=n(34422),p=n(20394),g=n(80667),o=n(625),u={},l={},P=f.forwardRef(function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},x=arguments.length>1?arguments[1]:void 0,b=(0,f.useRef)(null),L=(0,o.S)(),U=L.map,I=L.AMap,D=(0,g.s)(d,b,{setterMap:u,converterMap:l}),w=D.loaded,R=D.onInstanceCreated;(0,f.useEffect)(function(){U&&V().then(function(){R==null||R(b.current)})},[U]),(0,f.useImperativeHandle)(x,function(){return b.current},[w]);var V=function(){return new Promise(function(S){b.current=new I.OverlayGroup([]),S()})},T=function(S){return S?f.Children.map(S,function(Z){return f.cloneElement(Z,{events:{created:function($){b.current&&b.current.addOverlay($)}}})}):null};return w?T(d.children):null}),m=n(92265),v=n(11527),c=function(){var d=(0,f.useRef)(),x=(0,f.useRef)([]),b=(0,f.useState)([[[116.474595,40.001321],[116.473526,39.999865],[116.476284,40.000917]],[[116.475334,39.997534],[116.476627,39.998315],[116.478603,39.99879],[116.478529,40.000296],[116.475082,40.000151],[116.473421,39.998717]]]),L=y()(b,1),U=L[0],I=(0,f.useRef)(),D=(0,f.useRef)(),w=function(E){I.current&&(I.current.addAdsorbPolygons(E),I.current.setTarget(E[0]),I.current.open(),x.current=E[0].getPath(),D.current.on("dblclick",R))},R=function(E){var S=E.target;x.current=S.getPath(),I.current.setTarget(S),I.current.open()},V=function(E){D.current=E,setTimeout(function(){var S=D.current.getOverlays();S.length&&w(S)},0)};return(0,v.jsx)("div",{style:{height:500},children:(0,v.jsxs)(h.D,{center:[116.475334,39.997534],zoom:16,events:{created:function(E){d.current=E}},children:[(0,v.jsx)(p.$,{events:{created:function(E){I.current=E},removenode:function(E){var S=E.target,Z=S.getPath();if(Z.length===0){var Y=D.current.getOverlays();if(Y.length===1){s.ZP.warning("\u533A\u57DF\u5FC5\u987B\u5269\u4F59\u4E00\u4E2A");var $=new AMap.Polygon({map:d.current,path:x.current});D.current.removeOverlay(S),D.current.addOverlay($),D.current.on("dblclick",R)}D.current.removeOverlay(S);return}x.current=Z}}}),(0,v.jsx)(P,{events:{created:V},children:U.map(function(T,E){return(0,v.jsx)(m.m,{path:T},E)})})]})})}}}]);
